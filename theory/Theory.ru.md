# Генерация ландшафтов

## Введение

Поверхность нашей планеты (Земли) рельефна: полна возвышенностей и впадин. Часто люди хотят повторить те результаты,
на которые у природы заняли миллионы и более лет. Иногда решением выступает человеческое чувство, которое вырабатывалось на протяжении всей его жизни,
и посему он способен более или менее достоверно повторить земные ландшафты; однако это чрезвычайно неэффективно.

Именно поэтому было решено создать программное обеспечение, которое сможет генерировать фотореалистичные ландшафты различного рода.

## Описание программы

### Требования

- Кроссплатформенность. Приложение должно работать на любых операционных системах.
- Настраиваемость
    - Выбор из нескольких определённых алгоритмов в качестве основы.
    - Возможность задания различных параметров генерации.
        - Различные константные значения, отвечающие за незначительные в принципе генерации различия.
        - Выбор разных режимов генерации, если алгоритм это поддерживает.
- Поддержка бесконечно генерируемых карт.
- Рендеринг
    - Двумерный рендер карты на плоскости. Различные палитры.
    - Трёхмерное отображение карты высот.
- Удалённые вычисления. Ввиду того, что вычисления, производимые во время генерации, достаточно сложные, необходимо
  добавить возможность производить эти вычисления не прямо на клиенте, а на удалённом сервере.
- ![](http://risovach.ru/upload/2016/04/mem/rabotay_110961691_orig_.png)

### Реализовано

- Кроссплатформенность. Приложение реализовано на веб технологиях, и его можно использовать из любого браузера.
- Клиентская часть приложения написана на языке программирования F#, с использованием компилятора Fable для перевода исходного 
  кода в JavaScript. Для трёхмерного (и двухмерного) рендеринга используется библиотека Three.js.
- Серверная часть приложения написана на языке программирования F#, на платформе .NET, на сервере ASP.NET Core.
- Алгоритмы
    - Реализован алгоритм Diamond Square, с возможностью бесконечной бесшовной почанковой генерации. Также реализованно
      отображение с показом интерполированных (усреднённых) результатов.
- Рендеринг с использованием различных палитр.

### Предстоит

- Указание параметров генерации.
    - Указание как числовых параметров.
    - Указание произвольных функций, необходимых алгоритму, если тот их поддерживает, с последующим исполнением этих функций на стороне сервера.
- Различные варианты рендеринга.
    - Трёхмерное отображение вершин.
    - Фотореалистичные шейдеры.
    
## Используемые инструменты

- .NET — платформа, TBD
- F# — язык программирования, TBD

## Теория

### Карта высот

В компьютерной графике, карта высота или heightmap — это растровое изображение, где каждый пиксель отвечает за высоту: чёрным цветом представляется самая низкая высота, а белым — самая высокая.

## Рендер карты высот

Существует множество способов, как можно изобразить (отрендерить) карту высот:

- Чёрно-белое изображение, где тёмные пиксели обозначают более низкую высоту, а светлые — более высокую. По сути, это сырые данные о карте высот.\
    ![](https://upload.wikimedia.org/wikipedia/commons/5/57/Heightmap.png)

- Разукрашенное палитрой изображение. Является просто разукрашенной чёрно-белой вариацией карты высот, согласно некоторой палитре.\
    ![](https://lh3.googleusercontent.com/proxy/S7GDD5Ii3Sy6oV6KEvS3HM7JrWJuFYyZ63_xp-xqJRgYw8mjLzUx3ODf1MxH1NeQWFX07qZoo_LqEuAJ77rqTr89CAKZGXCg5GzzRkjl_Km7IHCljDqaro87qA)

- Трёхмерное отображение.\
    ![](https://www.3d-map-generator.com/wp-content/uploads/2018/12/atlas-feature-tools-heightmap-tools_grayscale-heightmap-example.png)


# Зачем?

![](https://lh3.googleusercontent.com/proxy/r-nT0qez-qSlMeR0NWfiUhtkw56HGs3ftOaIPsbFL2WP4L29820BGrttL1h1uZGoIe2sEJOpYBBOYZODLGiRadcyWW_mP9I6)

# Алгоритмы

## Diamond Square

TBD
